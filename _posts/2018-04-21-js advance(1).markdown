---
layout: post
title: "js advance(1)"
date: 2018-04-21
categories:
  - Juice
description: 
image: https://unsplash.it/2000/1200?image=899
image-sm: https://unsplash.it/2000/1200?image=899
---

最近准备好好啃一啃js，一步一步来。

#线程机制与事件机制

##进程与线程

进程（process）的基本概念:
- 程序的一次执行，它占有一片独有的内存空间
- 可以通过windows任务管理器查看进程
- 进程被称为cpu的最小资源单位

线程（thread）的基本概念：
- 是进程内的一个独立执行单位
- 是程序执行的一个完整的流程
- 是cpu的最小的调度单元

放上一张图，可以更加简单的了解，这2个之间的关系：
![image.png](https://upload-images.jianshu.io/upload_images/3378252-a95130975e74f579.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

------

进程与线程的相关知识：

* 应用程序必须运行在某个进程的某个线程上
* 一个进程中至少有一个运行的线程：主线程（既然有主线程肯定就有分线程这个说法），主线程是，进程启动后自动创建的
* 一个进程中也可以同时运行多个线程，我们会说程序是多个线程运行的
* 一个进程中的数据可以供其中的多个线程直接共享
* 多个进程之间的数据是不能共享的
* 线程池（thread pool）：保存多个线程对象的容器，实现线程对象的反复利用（复用性）
-----

有时候会问到跟进程与线程相关的问题，在这里总结一下。

1.何为多进程与多线程？
多进程运行：一个应用程序可以同时启动多个实例运行。
多线程运行：在一个进程内，同时有多个线程运行。

2.比较单线程与多线程？
- 多线程
优点：有效提升cpu的利用率
 缺点：1.创建多线程会增加开销；
             2线程切换也会有开销；
             3.死锁与状态同步问题

- 单线程
优点：顺序编程 简单易懂
缺点：效率低

3.JS是单线程还是多线程？
- js是单线程运行的
- H5中的web workers可以多线程运行

4.浏览器运行是单线程还是多线程？
都是多线程

5.浏览器运行是单进程还是多进程？
- 有的是单进程。比如：Firefox和老版本的IE
- 有的是多进程：比如：chrome和新版IE
- 如何查看浏览器是否是多线程运行的呢？通过任务管理器-->查看进程
#浏览器内核
- 浏览器内核就是支撑浏览器运行的最核心的程序
- 不同的浏览器 内核可能不一样 这里举几个例子
Chrome，Safari：webkit
firefox：Gecko
IE：Trident
360、搜狗等国内浏览器：Trident+webkit
这里说一句题外话，国产浏览器称自己为双核，其实就是用了2个内核，还是比较垃圾。在正常显示网页的时候，国产浏览器使用的内核是webkit，当涉及到金钱交易的时候会把内核设置为Trident，IE的内核对安全性要求比较高。
- 内核是由很多模块组成的，下面简单列举一下
js引擎模块：负责js程序的编译与运行
html，css文档解析模块：负责页面文本的解析
DOM/CSS模块：负责dom/css在内存中的相关处理（这里相当于把解析后的文档抽象成数据结构，例如domtree cssomtree）
布局和渲染模块：负责页面的布局和效果绘制
以上这4个可以称为主线程。
...还有很多模块 这里就不过多提及。
下面说3个比较典型的3个分线程：
定时器模块：负责定时器的管理
Dom事件响应模块：负责事件的管理
网络请求模块：负责ajax请求
这里我把分线程理解为异步。
附上一张图，简单明了：
![image.png](https://upload-images.jianshu.io/upload_images/3378252-35a988ce46534d5e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
